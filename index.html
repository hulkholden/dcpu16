<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="bootstrap.min.css">

    <title>0x10c</title>
  </head>
  <body>
    <div class="container" id="container">
      <div class="row"><div class="span12">
        <h1>0x10c DCPU-16 Emulator</h1>
      </div>

      <!--
      <div class="row"><div class="span12">
        <div id="form">
          <form id='login_form' action='javascript:doExecute()'>
            <fieldset>
              <legend>Choose a file to load and run</legend>
              <div class="clearfix">
                <label for="fileInput">Filename</label>
                <div class="input">
                  <input class="input-file" id="fileInput" name="fileInput" type="file" />
                </div>
              </div>
              <div class="actions">
                <input type="submit" class="btn primary" value="Load Program">&nbsp;<button type="reset" class="btn">Cancel</button>
              </div>
            </fieldset>
          </form>  
        </div>
      </div></div>
      -->
    </div>
    <script src="jquery-1.6.4.min.js"></script>
    <script src="0x10c.js"></script>

    <script>
    function doExecute() {
      var f = document.getElementById("fileInput");
      var file = f.files[0];
      var name = file.fileName;
      var size = file.fileSize;

      var reader = new FileReader();

      reader.onerror = function(e) {
        alert('error');
      }

      // Closure to capture the file information.
      reader.onload = function(e) {
          execute(name, e.target.result);
      };

      // Read in the image file as a data URL.
      reader.readAsArrayBuffer(file);
    }
    </script>

  </body>
</html>
